(()=>{"use strict";const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let t=!1,n="celsius";const a={method:"GET",headers:{accept:"application/json"}};function o(o){fetch(`https://api.tomorrow.io/v4/weather/realtime?location=${o}&apikey=Myn196y0vihIZSTNpL5yNZ0gU0PBPdLY`,a).then((e=>e.json())).then((a=>function(a){console.log(a);const o=document.getElementById("content");o.innerHTML=" ";const i=document.createElement("div");i.classList.add("weathercard");const c=document.createElement("img");c.classList.add("weathericon");const s=new Date(a.data.time),r=s.getHours();t=r<6&&r>20;const d=document.createElement("h2");d.textContent="Today, "+e[s.getDay()];const l=document.createElement("h3");var u,m;u=a.location.lat,m=a.location.lon,fetch(`http://api.timezonedb.com/v2.1/get-time-zone?key=B4K4P9U2INY5&format=json&by=position&lat=${u}&lng=${m}`).then((e=>e.json())).then((function(e){let t=e.formatted;console.log(t);let n=t.substring(e.formatted.indexOf(":")-2,e.formatted.indexOf(":")+3);console.log(n),l.textContent=n})).catch((e=>console.error(e)));const g=document.createElement("h1");Math.round("number"===a.location.name.charAt(0)),g.textContent=a.location.name.substring(a.location.name.indexOf(",")+2,a.location.name.indexOf(",",a.location.name.indexOf(",")+1));const p=document.createElement("h2"),y=document.createElement("p");"celsius"===n?(p.textContent=a.data.values.temperature+"ºC",y.textContent="Wind Speed: "+Math.round(3.6*a.data.values.windSpeed)+" Km/h"):"farenheit"===n&&(p.textContent=1.8*a.data.values.temperature+32+"ºF",y.textContent="Wind Speed: "+Math.round(2*a.data.values.windSpeed,237)+" mph");const v=document.createElement("p");return v.textContent="Humidity: "+a.data.values.humidity+"%",a.data.values.precipitationProbability>50&&a.data.values.rainIntensity>.55?(c.src="../src/images/icons/cloud-rain.svg",t||(document.body.style.backgroundImage="url('../src/images/backgrounds/storm.jpg')")):a.data.values.precipitationProbability>50&&a.data.values.rainIntensity<.5?(c.src="../src/images/icons/cloud-rain.svg",document.body.style.backgroundImage=t?"url('../src/images/backgrounds/night-rain.jpg')":"url('../src/images/backgrounds/rain.jpg')"):a.data.values.cloudCover<25?(c.src="../src/images/icons/sunny.svg",document.body.style.backgroundImage=t?"url('../src/images/backgrounds/clearest-night.jpg')":"url('../src/images/backgrounds/clear.jpg')"):a.data.values.cloudCover>25&&a.data.values.cloudCover<50?(c.src="../src/images/icons/cloud-sun.svg",document.body.style.backgroundImage=t?"url('../src/images/backgrounds/night-cloudy.jpg')":"url('../src/images/backgrounds/cloudy.jpg')"):a.data.values.cloudCover>50&&(c.src="../src/images/icons/cloud-forecast.svg",document.body.style.backgroundImage=t?"url('../src/images/backgrounds/night-cloudy.jpg')":"url('../src/images/backgrounds/cloudy.jpg')"),i.appendChild(c),i.appendChild(d),i.append(l,g,p,v,y),o.appendChild(i),i}(a))).catch((e=>console.error(e)))}function i(t){fetch(`https://api.tomorrow.io/v4/weather/forecast?location=${t}&apikey=Myn196y0vihIZSTNpL5yNZ0gU0PBPdLY`,a).then((e=>e.json())).then((t=>function(t){console.log(t);const a=document.getElementById("forecast");a.innerHTML=" ";const o=document.createElement("div");o.classList.add("futurecardsdiv");for(let a=1;a<6;a++){console.log(a);let i=document.createElement("div"),c=new Date(t.timelines.daily[a].time),s=document.createElement("p");s.textContent=e[c.getDay()],i.classList.add("futuredaycard");let r=document.createElement("img"),d=document.createElement("p"),l=document.createElement("p");t.timelines.daily[a].values.precipitationProbabilityAvg>50?r.src="../src/images/icons/cloud-rain.svg":t.timelines.daily[a].values.precipitationProbabilityAvg<25?r.src="../src/images/icons/sunny.svg":t.timelines.daily[a].values.precipitationProbabilityAvg>25&&t.timelines.daily[a].values.precipitationProbabilityAvg<50?r.src="../src/images/icons/cloud-sun.svg":t.timelines.daily[a].values.precipitationProbabilityAvg>50&&(r.src="../src/images/icons/cloud-forecast.svg"),"celsius"===n?(l.textContent="Max: "+Math.round(t.timelines.daily[a].values.temperatureMax)+"ºC",d.textContent="Min: "+Math.round(t.timelines.daily[a].values.temperatureMin)+"ºC"):"fareinheit"===n&&(l.textContent="Max: "+Math.round(1.8*t.timelines.daily[a].values.temperatureMax+32)+"ºF",d.textContent="Min: "+Math.round(1.8*t.timelines.daily[a].values.temperatureMin+32)+"ºF"),i.append(s,r,d,l),o.appendChild(i)}a.appendChild(o)}(t))).catch((e=>console.error(e)))}const c=document.querySelector(".switch-input"),s=document.getElementById("location-input"),r=document.getElementById("magnifying");let d="barcelona";window.addEventListener("load",(()=>{o(d),i(d)})),r.addEventListener("click",(()=>{console.log("glass clicked"),o(s.value)})),c.addEventListener("click",(()=>{n="farenheit",o(d),i(d)}))})();